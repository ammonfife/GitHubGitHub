{
  "openapi": "3.1.0",
  "info": {
    "title": "GitHub GPT Public Actions",
    "version": "1.0.0",
    "description": "Public actions agents will call to set openai keys and use admin access."
  },
  "paths": {
    "/actions/select-openai-key": {
      "post": {
        "summary": "Determines the correct OpenAI key to use based on the current repo name",
        "operationId": "selectOpeNAIKey",
        "responses": {
          "200": { "description": "Sets OPENAI_KEY env variable with the appropriate key" }
        }
      }
    },
    "/actions/use-admin-openai-key": {
      "post": {
        "summary": "Safely uses the admin OpenAI key if allowed",
        "operationId": "useAdminOpenAIKey",
        "parameters": [],
        "responses": {
          "200": { "description": "Admin token applied; OpenAI commands can now be executed with evaluated privileges" },
          "403": { "description": "Blocked when allowance is not specified or missing" }
        }
      }
    },
    "/user/repos": {
      "get": {
        "operationId": "getUserRepos",
        "summary": "List user-accessible repositories",
        "parameters": [{"name": "visibility", "in": "query", "schema": {"type": "string", "enum": ["all", "public", "private"]}}, {"name": "per_page", "in": "query", "schema": {"type": "integer", "default": 30}}, {"name": "page", "in": "query", "schema": {"type": "integer", "default": 1}}],
        "responses": {"200": {"description": "List of repositories"}}
      }
    },
    "post": {
      "operationId": "createRepo",
      "summary": "Create a new repository",
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["name"],
              "properties": {
                "name": { "type": "string" },
                "description": { "type": "string" },
                "private": { "type": "boolean" },
                "auto_init": { "type": "boolean" }
              }
            }
          }
        }
      },
      "responses": {
        "201": { "description": "Repository created"}
      }
    }
  },
  "components": {"schemas": {}, "securitySchemes": {"TokenAuth": {"type": "apiKey", "in": "header", "name": "Authorization"}}},
  "security": [{ "TokenAuth": [] }]
}